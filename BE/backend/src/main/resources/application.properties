# =============================
# NEKO NIHONGO BACKEND – CẤU HÌNH PRODUCTION (2026)
# =============================

# Render/Heroku/Vercel dùng env PORT, fallback 8080
server.port=${PORT:8080}

# ==================== Database (Production) ====================
# KHÔNG HARD CODE DB CREDENTIALS!
spring.datasource.url=${DATABASE_URL:jdbc:mysql://localhost:3306/neko_db?useSSL=true&serverTimezone=UTC}
spring.datasource.username=${DATABASE_USERNAME:root}
spring.datasource.password=${DATABASE_PASSWORD:}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA/Hibernate – Production safe
# Chỉ validate schema, không tự sửa
spring.jpa.hibernate.ddl-auto=validate
# Tắt show SQL (performance + security)
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# ==================== JWT ====================
# KHÔNG HARD CODE SECRET! 
# Lưu ý: JWT_SECRET phải được set trên Dashboard Render
jwt.secret=${JWT_SECRET}
# 1 ngày
jwt.expiration-ms=86400000
# 30 ngày
jwt.refresh-expiration-ms=2592000000

# ==================== CORS (Production) ====================
app.cors.allowed-origins=${ALLOWED_ORIGINS:https://nekonihongo.com,https://www.nekonihongo.com,http://localhost:5173}

# ==================== Swagger/OpenAPI (Production) ====================
springdoc.swagger-ui.enabled=false
springdoc.api-docs.enabled=false

# ==================== Logging (Production) ====================
logging.level.root=INFO
logging.level.com.nekonihongo.backend=INFO
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.org.springframework.web=WARN
logging.level.org.springframework.transaction=WARN
logging.level.org.springframework.orm.jpa=WARN

# Trên Render nên dùng Console Log, không nên log ra file
# logging.file.name=/var/log/app.log

# ==================== Other Production Settings ====================
spring.devtools.restart.enabled=false
spring.devtools.livereload.enabled=false

management.endpoints.web.exposure.include=health
management.endpoint.health.show-details=when-authorized

server.error.include-message=never
server.error.include-binding-errors=never
server.error.include-stacktrace=never
server.error.include-exception=false

server.servlet.session.cookie.secure=true
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.same-site=strict

spring.web.resources.add-mappings=true
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl